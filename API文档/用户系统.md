## 用户系统

初始超管账号：administrator ，密码1

- 权限：
  - 使用一个固定格式的字符串代表一个权限，一个权限至少对应了一个接口的访问权限
  - 权限字符串的格式为：“命名空间:操作:对象”
    - 命名空间：一般为接口所操作的对象，如：用户、订单、日志
    - 操作：该接口执行的操作，最常见操作为：增、删、改、查
    - 对象：被操作的对象
  - 例如：权限字符串“日志:查询:分页”，代表操作对象为 日志，执行的操作为查询，查询的内容为分页数据
  - 星号（*）为通配符，含义为：全部 或 所有。如拥有 “日志:查询:\*”权限的用户可以访问需要 “日志:查询:分页” 权限的接口，但反过来不行。
  - \*:\*:\* 即代表所有权限，可以访问所有的接口。
- 角色：

  - 角色通常代表一个抽象或具体的“身份”，如：教师，母亲，父亲，教务处主任
  - 每个角色可以拥有复数个权限，多个角色可以拥有重叠的权限，类似于每个身份有不同的、多种能力，不同身份也可以有部分相同的能力。如教师的能力可能有：上课、布置作业；母亲的能力有：做饭，洗衣；父亲的能力可能有：做饭，开车。
- 用户：



### 用户

前缀：/User

#### 拥有通用API

| 添加 | 修改 | 删除 | 查询全部 | 查询分页 |
| ---- | ---- | ---- | -------- | -------- |
| X    | X    | X    | X        | ✓        |

#### 登陆

API地址：/login

params参数：

| 字段     | 含义   | 类型   | 是否必须 |
| -------- | ------ | ------ | -------- |
| username | 用户名 | 字符串 | ✓        |
| password | 密码   | 字符串 | ✓        |

#### 获取当前登陆状态

API地址：/status

#### 登出

API地址：/logout

#### 注册

API地址：/reg

data参数：

| 字段     | 含义   | 类型   | 是否必须 |
| -------- | ------ | ------ | -------- |
| username | 用户名 | 字符串 | ✓        |
| password | 密码   | 字符串 | ✓        |
| name     | 姓名   | 字符串 | ✓        |
| phone    | 电话   | 字符串 |          |

#### 修改密码

API地址：/editPassword

params参数：

| 字段    | 含义   | 类型   | 是否必须 |
| ------- | ------ | ------ | -------- |
| oldPass | 旧密码 | 字符串 | ✓        |
| newPass | 新密码 | 字符串 | ✓        |

#### 修改用户信息

API地址：/editUserInfo

data参数：

| 字段  | 含义       | 类型   | 是否必须 |
| ----- | ---------- | ------ | -------- |
| uuid  | 用户唯一ID | 字符串 | ✓        |
| name  | 姓名       | 字符串 | ✓        |
| phone | 电话       | 字符串 | ✓        |

#### 修改可用状态

API地址：/available

params参数：

| 字段 | 含义       | 类型   | 是否必须 |
| ---- | ---------- | ------ | -------- |
| uuid | 用户唯一ID | 字符串 | ✓        |

#### 重置用户密码

API地址：/resetPassword

params参数：

| 字段     | 含义       | 类型   | 是否必须 |
| -------- | ---------- | ------ | -------- |
| userUuid | 用户唯一ID | 字符串 | ✓        |
| password | 新密码     | 字符串 | ✓        |

#### 查询拥有指定角色的用户姓名电话

API地址：/listByRoleName

params参数：

| 字段     | 含义     | 类型   | 是否必须 |
| -------- | -------- | ------ | -------- |
| roleName | 角色名称 | 字符串 | ✓        |

### 角色

前缀：/Role

#### 拥有通用API

| 添加 | 修改 | 删除 | 查询全部 | 查询分页 |
| ---- | ---- | ---- | -------- | -------- |
| ✓    | ✓    | ✓    | ✓        | ✓        |

操作对象结构：

| 字段 | 含义 | 类型   | 是否必须               | 作为过滤条件时的含义 |
| ---- | ---- | ------ | ---------------------- | -------------------- |
| uuid | uuid | 字符串 | 修改时必须，添加时为空 | 无                   |
| name | 名称 | 字符串 | ✓                      | 无                   |

#### 为用户添加、移除角色

API地址：

- 添加：/前缀/addRole
- 移除：/前缀/removeRole

params参数：

| 字段     | 含义     | 类型   | 是否必须 |
| -------- | -------- | ------ | -------- |
| userUuid | 用户UUID | 字符串 | ✓        |
| roleUuid | 角色UUID | 字符串 | ✓        |

### 权限

前缀：/Permission

#### 拥有通用API

| 添加 | 修改 | 删除 | 查询全部 | 查询分页 |
| ---- | ---- | ---- | -------- | -------- |
| ✓    | ✓    | ✓    | ✓        | ✓        |

操作对象结构：

| 字段      | 含义     | 类型   | 是否必须               | 作为过滤条件时的含义 |
| --------- | -------- | ------ | ---------------------- | -------------------- |
| uuid      | uuid     | 字符串 | 修改时必须，添加时为空 | 无                   |
| namespace | 命名空间 | 字符串 | ✓                      | 无                   |
| action    | 操作     | 字符串 | ✓                      | 无                   |
| target    | 目标     | 字符串 | ✓                      | 无                   |

#### 为角色添加、移除权限

API地址：

- 添加：/前缀/addPermission
- 移除：/前缀/removePermission

params参数：

| 字段           | 含义     | 类型   | 是否必须 |
| -------------- | -------- | ------ | -------- |
| roleUuid       | 角色UUID | 字符串 | ✓        |
| permissionUuid | 权限UUID | 字符串 | ✓        |

### 